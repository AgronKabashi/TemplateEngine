!function(a,b,c){"use strict";function d(a){var b,d="";return c.forEach(a.resolutions,function(a){d+=b?String.format("@media(min-width:{0}px) and (max-width:{1}px){",b.resolutionValue+1,a.resolutionValue):String.format("@media(max-width:{0}px){",a.resolutionValue),c.forIn(a.componentVisualProperties,function(a,b){d+=String.format("#TC{0}{{1}}",b,a)}),d+="}",b=a}),d}a.module("Demo",["ui.router","Cerberus.ModelFactory","Cerberus.TemplateEngine","Cerberus.TemplateEditor"]).config(["$stateProvider","$urlRouterProvider","templateEditorPath","Cerberus.ModelFactoryProvider","Cerberus.TemplateEngine.Service.TemplateProvider",function(a,b,c,d,e){e.setProvider(d.$get().getModelType("Cerberus.TemplateEngine.Service.TemplateLocalStorageProvider")),a.state("demo",{url:"/demo",templateUrl:"demo.html",controller:"Demo.Controller.Home"}).state("design",{url:"/design/:id",templateUrl:c+"view/design.html",controller:"Demo.Controller.Design"}).state("view",{url:"/view/:id",templateUrl:"view.html",controller:"Demo.Controller.View"}),b.otherwise("/demo")}]).controller("Demo.Controller.Home",["$scope","$http","Cerberus.TemplateEngine.Service.Template","Cerberus.ModelFactory",function(b,d,e,f){d.get("template-presets.json").then(function(a){b.templatePresets=a.data.templatePresets}),e.getTemplates().then(function(a){b.templates=a}),b.addTemplate=function(c){var d;c?(d=a.extend({},c.data),d.name=b.newTemplateName||c.name):(d=f.instantiateModel("Cerberus.TemplateEngine.Model.Template"),d.name=b.newTemplateName||"Template"),b.newTemplateName="",e.saveTemplate(d).then(function(a){b.templates.push(a)})},b.removeTemplate=function(a){var d=a.id;e.removeTemplate(d).then(function(){c.remove(b.templates,{id:d})})}}]).controller("Demo.Controller.View",["$scope","$stateParams","Cerberus.TemplateEngine.Service.Template","Cerberus.TemplateEngine.Service.Event",function(a,b,c,e){var f=b.id||0;c.getTemplate(f).then(function(b){a.templateCSS=d(b),e.notify("InitializeTemplate",b)})}]).controller("Demo.Controller.Design",["$scope","$state","$stateParams","Cerberus.TemplateEngine.Service.Template","Cerberus.TemplateEngine.Service.Event","Cerberus.TemplateEngine.Service.DataBag",function(a,b,c,d,e,f){e.subscribe("ExitTemplateEditor",function(){b.go("demo")});var g=c.id||0;d.getTemplate(g).then(function(a){f.addData("Template",a),e.notify("InitializeTemplate",a)})}]),b(document).ready(function(){a.bootstrap(document,["Demo"])})}(window.angular,window.$,window._);