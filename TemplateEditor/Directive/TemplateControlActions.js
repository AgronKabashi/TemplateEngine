define(["../App.js"],function(a){return a.directive("templatecontrolactions",function(){return{restrict:"E",templateUrl:"View/TemplateControlActions.html",controller:["$scope","Cerberus.Tool.TemplateEditor.Localization","Cerberus.Tool.TemplateEngine.Service.DataBag","Cerberus.Tool.TemplateEditor.Helper.TemplateEditor",function(a,b,c,d){function e(){c.GetData("Template").then(function(b){var c=b.TemplateControls;a.HiddenControls=0;for(var d=0;d<c.length;d++){var e=c[d];e.VisualProperties.indexOf("display:none")>=0&&a.HiddenControls++}})}function f(b,c){a.ResolutionIndex=d.FindResolutionIndex(a.Template,c)}var g=c.GetData("TemplateMode");a.ResolutionIndex=-1,a.SelectedControls=[],a.ShowTemplateEditorActions=g===TemplateMode.EditDesign,a.ShowContentEditorActions=g===TemplateMode.EditContent,a.HiddenControls=0,a.$on("TemplateControlSelected",function(b,c){a.SelectedControls=c}),a.ToggleHiddenElements=function(){a.ShowHiddenElements=!a.ShowHiddenElements,a.$emit("ShowHiddenElements",a.ShowHiddenElements)},a.$on("ResolutionSelected",e),a.$on("ResolutionSelected",f),a.$on("TemplateControlVisibilityChanged",e),a.RemoveSelectedTemplateControls=function(){c.GetData("Template").then(function(b){for(var c,e=0;e<a.SelectedControls.length;e++)c=a.SelectedControls[e],b.TemplateControls.RemoveValue("Id",c.Id),d.RemoveTemplateControlFromResolutions(b,c)})},a.DistributeResolutionPropertiesToAllResolutions=function(){c.GetData("Template").then(function(b){for(var c,e=0;e<a.SelectedControls.length;e++){c=a.SelectedControls[e];for(var f=0;f<b.Resolutions.length;f++){var g=b.Resolutions[f];d.SetTemplateControlVisualProperties(b,g,c)}}})},a.DistributeResolutionPropertiesToLowerResolutions=function(){c.GetData("Template").then(function(b){for(var e,f=c.GetData("CurrentResolution"),g=0;g<a.SelectedControls.length;g++){e=a.SelectedControls[g];for(var h=0;h<b.Resolutions.length;h++){var i=b.Resolutions[h];i.ResolutionValue<f.ResolutionValue&&d.SetTemplateControlVisualProperties(b,i,e)}}})},a.DistributeResolutionPropertiesToHigherResolutions=function(){c.GetData("Template").then(function(b){for(var e,f=c.GetData("CurrentResolution"),g=0;g<a.SelectedControls.length;g++){e=a.SelectedControls[g];for(var h=0;h<b.Resolutions.length;h++){var i=b.Resolutions[h];i.ResolutionValue>f.ResolutionValue&&d.SetTemplateControlVisualProperties(b,i,e)}}})}}]}})});