define(["../App.js","/Module/CMS/Service/Folder.js"],function(a){return a.directive("treeview",["Cerberus.Module.CMS.Service.Folder",function(a){return{restrict:"A",scope:{ngModel:"="},template:'<li ng-repeat="folder in Folders" treeviewitem="{{folder.Id}}" ng-class="{ expanded: IsExpanded, selected: ngModel.FolderId == folder.Id }">								<span ng-bind="folder.Name" ng-click="Expand(folder.Id)" />							</li>',link:function(b,c,d){function e(){var c=~~d.folderid;b.Folders=a.GetFolders(c);b.ngModel.ExpandFolderList.indexOf(b.ngModel.FolderId)}var f=b.$watch("ngModel.ExpandFolderList",function(){b.ngModel.ExpandFolderList&&(f(),e())})}}}]).directive("treeviewitem",["$compile",function(a){return{restrict:"A",link:function(b,c,d){b.Expand=function(d,e){if(b.IsExpanded=!b.IsExpanded,e||(b.ngModel.FolderId=d),!b.IsCached){b.IsCached=!0;var f=a(String.format('<ul data-treeview folderid="{0}" ng-model="ngModel"></ul>',d));c.append(f(b))}},b.ngModel.ExpandFolderList.indexOf(~~d.treeviewitem)>=0&&b.Expand(~~d.treeviewitem,!0)}}}])});